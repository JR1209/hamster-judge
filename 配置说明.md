# 仓鼠法官配置说明 🐹⚖️

## 📋 功能介绍

仓鼠法官现在支持两种运行模式：
1. **模拟模式**：使用简单算法进行裁决（无需API）
2. **AI模式**：使用大语言模型进行智能裁决（需要API密钥）

## 🔧 配置步骤

### 方式一：使用通义千问 API（推荐）

1. **获取API密钥**
   - 访问：https://dashscope.console.aliyun.com/apiKey
   - 登录阿里云账号
   - 创建或查看你的API Key
   - 复制API Key

2. **在应用中配置**
   - 打开仓鼠法官应用
   - 在左侧边栏选择"AI模式"
   - API提供商选择"通义千问 (Qwen)"
   - 粘贴你的API Key
   - 模型名称可选：
     - `qwen-plus`（推荐，性价比高）
     - `qwen-turbo`（速度快）
     - `qwen-max`（效果最好）

3. **测试运行**
   - 输入甲乙双方的陈述
   - 点击"提交裁决"
   - 等待AI分析结果

### 方式二：使用OpenAI API

1. **获取API密钥**
   - 访问：https://platform.openai.com/api-keys
   - 登录OpenAI账号
   - 创建新的API Key
   - 复制API Key

2. **在应用中配置**
   - 在左侧边栏选择"AI模式"
   - API提供商选择"OpenAI"
   - 粘贴你的API Key
   - 模型名称：`gpt-3.5-turbo` 或 `gpt-4`

### 方式三：使用自定义API

如果你有其他兼容OpenAI格式的API（如DeepSeek、Moonshot等）：

1. 选择"自定义"
2. 填入API Key
3. 填入API地址（如：`https://api.moonshot.cn/v1/chat/completions`）
4. 填入对应的模型名称

## ⚖️ 自定义判断标准

在侧边栏中勾选"使用自定义判断标准"，你可以自定义AI的评判依据：

**示例1：注重沟通质量**
```
请根据以下标准进行评判：
1. 沟通有效性（40%）：表达是否清晰、理性
2. 情感表达（30%）：是否真诚表达自己的感受
3. 解决意愿（30%）：是否愿意寻找解决方案

请给出：
- 甲方得分（0-100）
- 乙方得分（0-100）
- 详细分析
- 具体建议
```

**示例2：关注情感需求**
```
请作为专业的情感咨询师进行评判：
1. 情感需求合理性（35%）
2. 表达方式成熟度（25%）
3. 对伴侣的理解度（25%）
4. 改进意愿（15%）

请客观评分并给出温暖的建议。
```

**示例3：偏向公平性**
```
请严格按照以下标准：
1. 事实依据（50%）：陈述是否有具体事实支撑
2. 逻辑性（30%）：论述是否合理
3. 责任承担（20%）：是否愿意承担自己的责任

请给出客观的评分和分析。
```

## 💡 使用建议

### 何时使用模拟模式
- 只是想娱乐一下
- 没有API密钥
- 不需要专业分析

### 何时使用AI模式
- 需要认真的关系分析
- 希望获得专业建议
- 想要更客观的评判

### 自定义标准的技巧
1. **明确权重**：清楚标注每个评判维度的比重
2. **具体说明**：详细描述每个维度的评判标准
3. **要求格式**：明确要求AI输出分数和分析
4. **调整语气**：可以让AI更严格或更温和

## 🔒 隐私与安全

- API Key仅保存在你的浏览器会话中
- 不会上传到任何服务器
- 每次关闭页面后会清空
- 对话内容只发送到你选择的AI服务

## 📞 常见问题

**Q: API调用失败怎么办？**
A: 检查API Key是否正确，是否有余额，网络是否正常。系统会自动降级到模拟模式。

**Q: 如何让判断更公正？**
A: 使用自定义标准，设置合理的评判维度和权重。

**Q: 费用如何？**
A: 
- 通义千问：约0.002元/次（使用qwen-plus）
- OpenAI：约0.01-0.05元/次
- 具体看你使用的模型

**Q: 可以保存配置吗？**
A: 目前配置保存在浏览器会话中，关闭页面后会清空。可以将API Key保存在密码管理器中。

## 🎯 快速开始

1. 运行程序：`streamlit run hamster_judge.py`
2. 打开浏览器访问提示的网址（通常是 http://localhost:8501）
3. 在侧边栏选择运行模式
4. 如果选择AI模式，填入API Key
5. 输入双方陈述，点击提交
6. 查看仓鼠法官的裁决结果！

---

祝你使用愉快！有问题欢迎反馈 💝

